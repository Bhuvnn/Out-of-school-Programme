<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Sign Up</title>
    <!-- Link to your CSS files -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layout.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/form.css') }}">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <main class="main-content">
        <div class="container">
            <div class="form-header">
                <h2 class="form-title">Create Student Account</h2>
                <p class="section-subtitle">Join our learning community today</p>
            </div>

            <!-- Flash messages -->
            <div class="flash-messages">
                {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}

                {% for category, message in messages %}
                <div class="alert alert-{{ category }}">
                    {{ message }}
                </div>
                {% endfor %}

                {% endif %}
                {% endwith %}
            </div>

            <form id="signup-form" class="form-container" method="POST" action="/student_signup">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="firstName" class="form-label">First Name</label>
                        <input type="text" id="firstName" name="firstName" class="form-control"
                            placeholder="Enter your first name"
                            value="{{ form_data.first_name if form_data.first_name else '' }}">
                    </div>

                    <div class="form-group">
                        <label for="lastName" class="form-label">Last Name</label>
                        <input type="text" id="lastName" name="lastName" class="form-control"
                            placeholder="Enter your last name"
                            value="{{ form_data.last_name if form_data.last_name else '' }}">
                    </div>

                    <div class="form-group">
                        <label for="fatherName" class="form-label">Father's Name</label>
                        <input type="text" id="fatherName" name="fatherName" value="{{father_name}}"
                            class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="motherName" class="form-label">Mother's Name</label>
                        <input type="text" id="motherName" name="motherName" value="{{mother_name}}"
                            class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="dob" class="form-label">Date of Birth</label>
                        <input type="date" id="dob" name="dob" value="{{dob}}" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Gender</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="gender" value="male"
                                    {% if gender == 'male' %}checked{% endif %}>
                                Male
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="gender" value="female"
                                    {% if gender == 'female' %}checked{% endif %}>
                                Female
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="gender" value="other"
                                    {% if gender == 'other' %}checked{% endif %}>
                                Other
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="religion" class="form-label">Religion</label>
                        <input type="text" id="religion" name="religion" value="{{ religion }}" class="form-control"
                            required>
                    </div>
                    <div class="form-group">
                        <label for="category" class="form-label">Category</label>
                        <select id="category" name="category" class="form-control form-select" required>
                            <option value="">Select Category</option>
                            <option value="general" {% if category == 'general' %}selected{% endif %}>General
                            </option>
                            <option value="obc" {% if category == 'obc' %}selected{% endif %}>OBC</option>
                            <option value="sc" {% if category == 'sc' %}selected{% endif %}>SC</option>
                            <option value="st" {% if category == 'st' %}selected{% endif %}>ST</option>
                            <option value="other" {% if category == 'other' %}selected{% endif %}>Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="mobile" class="form-label">Mobile Number</label>
                        <input type="tel" id="mobile" name="mobile" class="form-control" pattern="[0-9]{10}"
                            title="Please enter a 10-digit phone number" placeholder="Enter your mobile number"
                            value="{{ form_data.mobile if form_data.mobile else '' }}">
                    </div>

                    <div class="form-group">
                        <label for="password" class="form-label">Create Password</label>
                        <input type="password" id="password" name="password" class="form-control"
                            placeholder="Create your password">
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword" class="form-label">Confirm Password</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" class="form-control"
                            placeholder="Confirm your password">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Create Account</button>
                </div>
                <div class="alt-action">
                    <p>Already have an account? <a href="{{ url_for('student_signin') }}">Sign in</a></p>
                </div>
            </form>
        </div>
    </main>
    <script>
        // Toggle password visibility
        document.getElementById('togglePassword').addEventListener('click', function () {
            const passwordInput = document.getElementById('password');
            const icon = this.querySelector('i');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.replace('fa-eye', 'fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.replace('fa-eye-slash', 'fa-eye');
            }
        });

        document.getElementById('toggleConfirmPassword').addEventListener('click', function () {
            const confirmPasswordInput = document.getElementById('confirmPassword');
            const icon = this.querySelector('i');

            if (confirmPasswordInput.type === 'password') {
                confirmPasswordInput.type = 'text';
                icon.classList.replace('fa-eye', 'fa-eye-slash');
            } else {
                confirmPasswordInput.type = 'password';
                icon.classList.replace('fa-eye-slash', 'fa-eye');
            }
        });

        // Fade out flash messages after 5 seconds
        setTimeout(() => {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                alert.classList.add('fade-out');
                setTimeout(() => alert.remove(), 500);
            });
        }, 3000);
    </script>
</body>

</html>